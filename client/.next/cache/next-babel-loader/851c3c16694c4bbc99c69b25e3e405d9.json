{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"F:\\\\StackoverflowClone\\\\client\\\\components\\\\post\\\\post-vote\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { AuthContext } from '../../../store/auth';\nimport { FetchContext } from '../../../store/fetch';\nimport ModalContext from '../../../store/modal';\nimport Button from '../../button';\nimport { ArrowUp, ArrowDown } from '../../icons';\nimport styles from './post-vote.module.css';\n\nvar PostVote = function PostVote(_ref) {\n  _s();\n\n  var score = _ref.score,\n      votes = _ref.votes,\n      questionId = _ref.questionId,\n      answerId = _ref.answerId,\n      setQuestion = _ref.setQuestion;\n\n  var _useContext = useContext(AuthContext),\n      authState = _useContext.authState,\n      isAuthenticated = _useContext.isAuthenticated;\n\n  var _useContext2 = useContext(FetchContext),\n      authAxios = _useContext2.authAxios;\n\n  var _useContext3 = useContext(ModalContext),\n      handleComponentVisible = _useContext3.handleComponentVisible;\n\n  var isUpVoted = function isUpVoted() {\n    var _votes$find;\n\n    return ((_votes$find = votes.find(function (v) {\n      var _authState$userInfo;\n\n      return v.user === ((_authState$userInfo = authState.userInfo) === null || _authState$userInfo === void 0 ? void 0 : _authState$userInfo.id);\n    })) === null || _votes$find === void 0 ? void 0 : _votes$find.vote) === 1;\n  };\n\n  var isDownVoted = function isDownVoted() {\n    var _votes$find2;\n\n    return ((_votes$find2 = votes.find(function (v) {\n      var _authState$userInfo2;\n\n      return v.user === ((_authState$userInfo2 = authState.userInfo) === null || _authState$userInfo2 === void 0 ? void 0 : _authState$userInfo2.id);\n    })) === null || _votes$find2 === void 0 ? void 0 : _votes$find2.vote) === -1;\n  };\n\n  var upVote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$authAxios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return authAxios.get(\"/votes/upvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get = _context.sent;\n              data = _yield$authAxios$get.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function upVote() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var downVote = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$authAxios$get2, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return authAxios.get(\"/votes/downvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get2 = _context2.sent;\n              data = _yield$authAxios$get2.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function downVote() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var unVote = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _yield$authAxios$get3, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return authAxios.get(\"/votes/unvote/\".concat(questionId, \"/\").concat(answerId ? answerId : ''));\n\n            case 2:\n              _yield$authAxios$get3 = _context3.sent;\n              data = _yield$authAxios$get3.data;\n              setQuestion(data);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function unVote() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: styles.voteCell,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, __jsx(Button, {\n    className: styles.voteButton,\n    onClick: function onClick() {\n      return isAuthenticated() ? isUpVoted() ? unVote() : upVote() : handleComponentVisible(true, 'signup');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, __jsx(ArrowUp, {\n    className: isUpVoted() ? styles.voted : '',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: styles.score,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, score), __jsx(Button, {\n    className: styles.voteButton,\n    onClick: function onClick() {\n      return isAuthenticated() ? isDownVoted() ? unVote() : downVote() : handleComponentVisible(true, 'signup');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, __jsx(ArrowDown, {\n    className: isDownVoted() ? styles.voted : '',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(PostVote, \"q49/y4NsPfmtSq0POdol/swTicY=\");\n\n_c = PostVote;\nexport default PostVote;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostVote\");","map":{"version":3,"sources":["F:/StackoverflowClone/client/components/post/post-vote/index.js"],"names":["React","useContext","AuthContext","FetchContext","ModalContext","Button","ArrowUp","ArrowDown","styles","PostVote","score","votes","questionId","answerId","setQuestion","authState","isAuthenticated","authAxios","handleComponentVisible","isUpVoted","find","v","user","userInfo","id","vote","isDownVoted","upVote","get","data","downVote","unVote","voteCell","voteButton","voted"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\r\n\r\nimport { AuthContext } from '../../../store/auth'\r\nimport { FetchContext } from '../../../store/fetch'\r\nimport ModalContext from '../../../store/modal'\r\n\r\nimport Button from '../../button'\r\nimport { ArrowUp, ArrowDown } from '../../icons'\r\n\r\nimport styles from './post-vote.module.css'\r\n\r\nconst PostVote = ({ score, votes, questionId, answerId, setQuestion }) => {\r\n  const { authState, isAuthenticated } = useContext(AuthContext)\r\n  const { authAxios } = useContext(FetchContext)\r\n  const { handleComponentVisible } = useContext(ModalContext)\r\n\r\n  const isUpVoted = () => {\r\n    return votes.find((v) => v.user === authState.userInfo?.id)?.vote === 1\r\n  }\r\n\r\n  const isDownVoted = () => {\r\n    return votes.find((v) => v.user === authState.userInfo?.id)?.vote === -1\r\n  }\r\n\r\n  const upVote = async () => {\r\n    const { data } = await authAxios.get(\r\n      `/votes/upvote/${questionId}/${answerId ? answerId : ''}`\r\n    )\r\n    setQuestion(data)\r\n  }\r\n\r\n  const downVote = async () => {\r\n    const { data } = await authAxios.get(\r\n      `/votes/downvote/${questionId}/${answerId ? answerId : ''}`\r\n    )\r\n    setQuestion(data)\r\n  }\r\n\r\n  const unVote = async () => {\r\n    const { data } = await authAxios.get(\r\n      `/votes/unvote/${questionId}/${answerId ? answerId : ''}`\r\n    )\r\n    setQuestion(data)\r\n  }\r\n\r\n  return (\r\n    <div className={styles.voteCell}>\r\n      <Button\r\n        className={styles.voteButton}\r\n        onClick={() =>\r\n          isAuthenticated()\r\n            ? isUpVoted()\r\n              ? unVote()\r\n              : upVote()\r\n            : handleComponentVisible(true, 'signup')\r\n        }\r\n      >\r\n        <ArrowUp className={isUpVoted() ? styles.voted : ''} />\r\n      </Button>\r\n      <div className={styles.score}>{score}</div>\r\n      <Button\r\n        className={styles.voteButton}\r\n        onClick={() =>\r\n          isAuthenticated()\r\n            ? isDownVoted()\r\n              ? unVote()\r\n              : downVote()\r\n            : handleComponentVisible(true, 'signup')\r\n        }\r\n      >\r\n        <ArrowDown className={isDownVoted() ? styles.voted : ''} />\r\n      </Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostVote\r\n"]},"metadata":{},"sourceType":"module"}